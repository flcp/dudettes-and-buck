Attack modifier:
1-[[?{Power Attack|Yes,1|No,0}*(1+floor(@{bab}/4))]] + [[?{Smite|No,0|Yes,1}*@{charisma_mod}]]

Damage modifier:
1+[[?{Power Attack}*(2 + 2 * floor(@{bab}/4))]] + [[?{Smite}*?{OutsiderDragonUndead|No,1|Yes,2}*@{level}]]